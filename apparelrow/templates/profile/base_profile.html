{% extends "base.html" %}
{% load i18n apparel_extras %}

{% block head-data %} prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# {{ FACEBOOK_OG_TYPE }}: http://ogp.me/ns/fb/{{ FACEBOOK_OG_TYPE }}#"{% endblock head-data %}

{% block extra-styles %}
    <meta property="og:title" content="{{ profile.display_name }}"/>
    <meta property="og:type" content="profile"/>
    <meta property="og:image" content="{{ avatar_absolute_uri }}"/>
    <meta property="og:url" content="{{ request.build_absolute_uri }}"/>
    <meta property="og:description" content="{% if profile.about %}{{ profile.about }}{% else %}{% endif %}"/>
    <meta property="og:site_name" content="{{ CURRENT_NAME }}"/>
    <meta property="fb:app_id" content="{{ FACEBOOK_APP_ID }}"/>
    {% if profile.facebook_user_id %}
    <meta property="fb:profile_id" content="{{ profile.facebook_user_id }}"/>
    {% endif %}
    <link type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/themes/smoothness/jquery-ui.css" rel="stylesheet" />
{% endblock extra-styles %}

{% block body-classes %}profile{% endblock body-classes %}
{% block body %}
    <div class="row profile-header">
        <div class="col-lg-2">
            <div id="profile-image">
                <a href="{{ profile.get_absolute_url }}"><img src="{{ profile.avatar_large }}" class="img-responsive"></a>
                {% if request.user.is_authenticated and request.user == profile %}
                <!--<a href="#edit" class="btn btn-small btn-block btn-positive btn-edit">{% trans "Change picture" %}</a>-->
                <!--<a href="#cancel" class="btn btn-small btn-block btn-negative btn-cancel">{% trans "Cancel" %}</a>-->
                <!--{% include 'profile/fragments/change_image_form.html' with form_enctype='multipart/form-data' %}-->
                {% endif %}
            </div>
        </div>
        <div class="col-lg-10">
            <h1><!--<span class="icon-slash-a">--></span>{{ profile.display_name }}</h1>
            {% include 'apparel/fragments/follow.html' with classes="btn btn-default btn-small btn-profile-follow" %}
            {% with likes_url=profile.url_likes updates_url=profile.url_updates looks_url=profile.url_looks followers_url=profile.url_followers following_url=profile.url_following %}
            <ul class="list-inline">
                <li>
                    {% if profile and profile.is_brand %}
                    {% url 'brand-likes-men' profile.slug as likes_url_men %}
                    {% url 'brand-likes-women' profile.slug as likes_url_women %}
                    <a class="{% if request.path == likes_url or request.path == likes_url_men or request.path == likes_url_women %}selected{% else %}first{% endif %}" href="{{ likes_url }}">{% trans "Shop" %}</a>
                    {% else %}
                    <a class="{% if request.path == likes_url %}selected{% else %}first{% endif %}" href="{{ likes_url }}">{% trans "Likes" %}</a>
                    {% endif %}
                </li>
                <li><a class="{% if request.path == updates_url %}selected{% endif %}" href="{{ updates_url }}">{% trans "Updates" %}</a></li>
                <li><a class="{% if request.path == looks_url %} selected{% endif %}" href="{{ looks_url }}">{% trans "Looks" %}</a></li>
                <li><a class="{% if request.path == followers_url %} selected{% endif %}" href="{{ followers_url }}">{% trans "Followers" %}</a></li>
                <li><a class="last{% if request.path == following_url %} selected{% endif %}" href="{{ following_url }}">{% trans "Following" %}</a></li>
            </ul>
            {% endwith %}

            {% if request.user.is_authenticated and request.user.is_partner and request.user == profile %}
            <a href="{% url 'profile-embed-shop' %}" class="btn btn-default btn-block">{% trans "Create a shop on your site" %}</a>
            {% endif %}


            {% if profile.about %}
            <p class="description">{{ profile.about|urlize_target_blank|linebreaksbr }}</p>
            {% endif %}
            <div id="profile-about" style="display: none;">
                {% if profile.about %}
                <p class="description">{{ profile.about|urlize_target_blank|linebreaksbr }}</p>
                {% if request.user.is_authenticated and request.user == profile %}
                <a href="#edit" class="btn btn-small btn-block btn-positive btn-edit">{% trans "Edit bio" %}</a>
                <a href="#cancel" class="btn btn-small btn-block btn-negative btn-cancel">{% trans "Cancel" %}</a>
                {% include 'profile/fragments/change_about_form.html' %}
                {% endif %}
                {% else %}
                {% if request.user.is_authenticated and request.user == profile %}
                <a href="#add" class="btn btn-block btn-positive btn-add">{% trans "Add a text about you" %}</a>
                {% include 'profile/fragments/change_about_form.html' %}
                {% endif %}
                {% endif %}
            </div>

            <ul class="list-inline">
                {% with likes_url=profile.url_likes looks_url=profile.url_looks followers_url=profile.url_followers following_url=profile.url_following %}
                {% if profile.is_brand %}
                <li class="left"><a href="{{ likes_url }}">{% blocktrans count products as prod %}{{prod}} product{% plural %}{{prod}} products{% endblocktrans %}</a></li>
                {% else %}
                <li class="left"><a href="{{ likes_url }}">{% blocktrans count products as prod %}Likes {{prod}} product{% plural %}Likes {{prod}} products{% endblocktrans %}</a></li>
                {% endif %}
                <li class="right"><a href="{{ looks_url }}">{% blocktrans count profile.looks as look_count %}Created {{look_count}} look{% plural %}Created {{look_count}} looks{% endblocktrans %}</a></li>
                <li class="left"><a href="{{ followers_url }}">{% trans "Followed by" %} {{ profile.followers_count }}</a></li>
                <li class="right"><a href="{{ following_url }}">{% trans "Following" %} {{ following }}</a></li>
                {% endwith %}
            </ul>

        </div>
    </div>

    {% block content %}{% endblock content %}
{% endblock %}
