{% extends "profile/base_profile.html" %}
{% load i18n %}
{% load apparel_extras %}
{% load cache %}
{% load thumbnail %}

{% block extra-title %}{{ profile.display_name }} | {% endblock %}

{% block 'extra-scripts' %}
    <script type="text/javascript">
        {% url profile-likes user.username as likes_url %}
        {% if request.path == likes_url %}
        jQuery(document).ready(function() {
            jQuery('a.product-heart').die('click').live('click', function() {
                var element = jQuery(this);
                if(element.hasClass('liked')) {
                    var elem = jQuery(this).closest('li');
                    var title = elem.find('h4').text() + ' ' + elem.find('.product-image img').attr('alt');

                    create_modal_dialog(
                        '{% trans "Are you sure?" %}',
                        ['{% trans "Do you really want to delete product" %} <span class="bold">' + title + '</span>?'],
                        function (modal_dialog) {
                            jQuery.post(element.attr('data-unlike-url'), function(data) {
                                if(data['success'] == true) { elem.remove(); modal_dialog.close(); }
                            });
                        },
                        function (modal_dialog) { modal_dialog.close(); }
                    );

                }
                return false;
            });
        });
        {% endif %}
    </script>
{% endblock 'extra-scripts' %}

{% block body-classes %}two-columns profile profile-likes{% endblock body-classes %}

{% block extended_content %}
<div id="content">
    {% if current_page.paginator.count != 0 %}
    <div id="product-list" class="product-list">
        {% include 'profile/fragments/likes.html' %}
    </div>
    <div class="clear"></div>
    {% else %}
    <div class="empty">
        {% url profile-likes request.user.username as profile_likes_url %}
        {% if request.path == profile_likes_url %}
            <div class="message warning">{% trans "You do not like any products right now." %} <a class="add" href="{% gender_url APPAREL_GENDER 'shop' %}">{% trans "Find products!" %}</a></div>
        {% else %}
            {% if profile.is_brand %}
            <div class="message warning">{{ profile.display_name }} {% trans "currently does not have any products." %}</div>
            {% else %}
            <div class="message warning">{{ profile.display_name }} {% trans "does not like any products so far." %}</div>
            {% endif %}
        {% endif %}
    </div>
    {% endif %}
</div>

{% endblock extended_content %}
