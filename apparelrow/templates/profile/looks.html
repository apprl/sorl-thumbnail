{% extends "profile/base_profile.html" %}
{% load i18n cache thumbnail apparel_extras %}

{% block extra-title %}{{ profile.display_name }} - {% trans "Looks" %} | {% endblock %}
{% block 'extra-scripts' %}
<script type="text/javascript">
    jQuery(document).ready(function() {
        jQuery('.inline-delete-look').click(function(event) {
            var title = jQuery(this).prev('a').attr('title');
            var href = jQuery(this).attr('href');
            var li = jQuery(this).closest('li');
            create_modal_dialog(
                '{% trans "Are you sure?" %}',
                ['{% trans "Do you really want to delete look" %} <span class="bold">' + title + '</span>?'],
                function (modal_dialog) {
                    jQuery.ajax({
                        url: href,
                        success: function(data) {
                            if (data.data) {
                                li.remove();
                            }
                        },
                        complete: function() { modal_dialog.close(); }
                    });
                },
                function (modal_dialog) { modal_dialog.close(); }
            );
            event.preventDefault();
        });

        {% if request.path == user.get_profile.url_looks %}
        jQuery('.inline-delete-look, .inline-edit-look').show();
        jQuery(document).on('infinite_scroll_data', function(e) {
            jQuery('.inline-delete-look, .inline-edit-look').show();
        });
        {% endif %}
    });
</script>
{% endblock 'extra-scripts' %}

{% block body-classes %}two-columns profile profile-looks{% endblock body-classes %}
{% block content %}
    {% if current_page.object_list %}
        {% include 'apparel/fragments/looks_large.html' %}
    {% else %}
        <div class="empty">
        {% if profile == request.user.get_profile %}
            <div class="message warning">
                {% trans "All looks that you create end up here." %}
                <a class="btn btn-block btn-positive btn-upper open-dialog" data-dialog-width="380" href="{% url apparel.views.look_create %}">{% trans "Create a look!" %}</a>
            </div>
        {% else %}
            <div class="message warning">{% blocktrans with profile.display_name as display_name %}{{ display_name }} has not created any looks yet.{% endblocktrans %}</div>
        {% endif %}
        </div>
    {% endif %}
{% endblock %}

{% block profile_right_sidebar %}{% endblock %}
