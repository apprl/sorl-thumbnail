{% extends "base.html" %}
{% load i18n %}
{% load facebook %}

{% block body-classes %}three-columns profile profile-profiles{% endblock body-classes %}

{% block body %}
    <div class="sidebar">
        <h2>{% trans "Latest members" %}</h2>
        <ul class="suggested-friends">
        {% for profile in latest_members %}
            <li>
            {% include 'apparel/fragments/avatar_link.html' %}
            </li>
        {% endfor %}
        </ul>
    </div>
    <div id="content">
        {% url user-list as user_list_url %}
        {% url popular-user-list as popular_user_list_url %}
        <ul class="user-list-tabs">
            <li><a class="first latest{% if request.path == popular_user_list_url %} current{% endif %}" href="{{ popular_user_list_url }}">{% trans "Most followers" %}</a></li>
            <li><a class="last popular{% if request.path == user_list_url %} current{% endif %}" href="{{ user_list_url }}">{% trans "Members in alphabetical order" %}</a></li>
        </ul>
        <ul class="users">
        {% for follower in object_list %}
            <li>
            {% with follower.user.get_profile as profile %}
                {% if profile %}{% include 'profile/fragments/follow_profile.html' %}{% endif %}
            {% endwith %}
            </li>
        {% endfor %}
        </ul>
        <div class="pagination">
            {% include 'apparel/fragments/pagination_simple.html' %}
        </div>
    </div>
    <div class="sidebar last">
        <h2>{% trans "Find your friends" %}</h2>
        {% if not user.is_authenticated %}
        <div>{% trans "Connect with your Facebook account to find your friends." %}</div>
        {% with MEDIA_URL|add:'images/facebook_signin_'|add:LANGUAGE_CODE|add:'.png' as facebook_login_image %}
        {% facebook_button facebook_login_image %}
        {% endwith %}
        {% else %}
        {% include 'apparel/fragments/facebook_friends.html' %}
        {% endif %}
    </div>
{% endblock body %}
