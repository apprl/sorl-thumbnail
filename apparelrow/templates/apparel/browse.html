{% extends 'base.html' %}
{% load i18n %}
{% load mptt_tags %}
{% load apparel_extras %}
{% block extra-title %}{% trans "Browse" %} | {% endblock %}

{% block 'extra-styles' %}
    <style type="text/css">
        .tooltip {
            display: none;
            width: 699px;
            height: 478px;
            -moz-box-shadow: 0 0 1em black;
            -webkit-box-shadow: 0 0 1em black;
            z-index: 200;
        }
    </style>
{% endblock 'extra-styles' %}
{% block 'extra-scripts' %}
    <script type="text/javascript" src="{{ MEDIA_URL }}/js/jquery/jquery.history.js"></script>
    <script type="text/javascript" src="{{ MEDIA_URL }}/js/jquery/jquery.fixedscroll.js"></script>
    <script type="text/javascript" src="{{ MEDIA_URL }}/js/filtersetup.js"></script>
    <script type="text/javascript">
        /* This variable contains the pagination data. It needs to be populated 
           with before rendering/recalculation may happen. This is the structure:
            - next_page_number      Integer or null if on last page
            - previous_page_number  Integer or null if on first page
            - pagination
                left                Array with page numbers on the left of ... null if there is nothing to display
                mid                 Array with page numbers on in the middle of the ...
                right               Array with page numbers on the right of ... null if there is nothing to display
            - paginator
                count               ?
                num_pages           Total number of pages
            - number                Current page number
        */
        var pagination_data = {
            pagination: {{ pagination|export_as_json}},
            paginator: {
                {# The Pagination object is not currently exportable... #}
                count: {{ pages.0.paginator.count }},
                num_pages: {{ pages.0.paginator.num_pages }}
            },
            number: {{ pages.0.number }}
        };

        var pricerange = {
            min: {{ pricerange.min }},
            max: {{ pricerange.max }}
        };

        var browse_url = '{% url apparel.views.browse %}';

    </script>
    <script type="text/javascript" src="{{ MEDIA_URL }}/js/browse.js"></script>
{% endblock 'extra-scripts' %}

{% block body-classes %}two-columns{% endblock body-classes %}

{% block body %}
        <div class="sidebar">
            {% include 'apparel/fragments/product_menu_browse.html' %}
        </div>
        <div id="content">
            <h2 id="product-count">
                {% blocktrans count current_page.paginator.count as counter %}{{ counter }} product{% plural %}{{ counter }} products{% endblocktrans %}
            </h2>
            {% include 'apparel/fragments/product_list.html' %}
        </div>
{% endblock body %}
