{% extends 'base.html' %}
{% load i18n %}
{% load thumbnail %}
{% block 'extra-styles' %}
    <link rel="stylesheet" href="http://flowplayer.org/tools/css/overlay-basic.css" media="screen" />
    <link rel="stylesheet" href="http://flowplayer.org/tools/css/overlay-gallery.css" media="screen" />
    <style type="text/css">
        .look {
            position: absolute;
        }
    </style>
{% endblock 'extra-styles' %}

{% block 'extra-scripts' %}
    <script src="http://cdn.jquerytools.org/1.1.1/full/jquery.tools.min.js"></script>
    <script type="text/javascript">
        jQuery(document).ready(function() {
            jQuery('.product-image').mouseenter(function() {
                jQuery(this).find('.magnifier').fadeIn('slow');
                return false;
            }).mouseleave(function() {
                jQuery(this).find('.magnifier').fadeOut('slow');
                return false;
            });
            jQuery('.product-image a').overlay({ target: "#gallery" }).gallery({ speed: 800 });

            jQuery('#add-to-look').mouseenter(function() {
                jQuery(this).find('ul').show();
            }).mouseleave(function() {
                jQuery(this).find('ul').hide();
            });
            jQuery('#add-to-look > ul > li > a').click(function() {
                args = {};
                args['product_id'] = {{ object.id }};
                if(this.id) {
                    args['look_id'] = this.id.split('-')[1];
                }
                jQuery.post("{% url apps.apparel.views.add_to_look %}", args);
                return false;
            });
        });
    </script>
{% endblock 'extra-scripts' %}

{% block body-classes %}sidebar right{% endblock %}

{% block body %}
{% if object %}
        <div id="content">
            <h2>{{ object.category.all|join:'\\' }}\{{ object.product_name }}</h2>
            <div id="product">
                {% include 'apparel/fragments/product_detail.html' %}
                <!-- overlay element -->
                <div class="simple_overlay" id="gallery">
                    <!-- "previous image" action -->
                    <a class="prev">prev</a>
                    <!-- "next image" action -->
                    <a class="next">next</a>
                    <!-- image information -->
                    <div class="info"></div>
                
                    <!-- load indicator (animated gif) -->
                    <img class="progress" src="http://static.flowplayer.org/tools/img/overlay/loading.gif" />
                </div>
            </div>
        </div>
        <div id="sidebar">
            <!--
            <div class="last-shown">
                <h2>{% trans "Recently viewed products" %}</h2>
            </div>
            <div class="similar-products">
                <h2>{% trans "Similar products" %}</h2>
                <div class="similar-product clearfix">
                    <img class="product-photo" />
                    <div class="product-summary">
                        <h5>Marc Jacobs</h5>
                        <span class="likes">9 likes</span>
                        <span class="price">959 SEK</span>
                        <a href="">Till plagget</a>
                    </div>
                </div>
            </div>
            -->
            {% if looks_with_product %}
            <div>
                <h2>
                    {% blocktrans count looks_with_product|length as counter %}
                        {{ counter }} look with this product
                    {% plural %}
                        {{ counter }} looks with this product
                    {% endblocktrans %}
                </h2>
                <ul id="looks-with-product">
                    {% for object in looks_with_product %}
                    <li><a href="{{ object.get_absolute_url }}"><div style="position: relative;">{% include 'apparel/fragments/look_collage_small.html' %}</div></a></li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
        </div>
{% else %}
    <p>No product found!</p>
{% endif %}
{% endblock body %}
