{% load i18n thumbnail thumbnail_extras apparel_extras %}
<li id="product-{{ object.id }}">
<div class="product-medium">
    <a class="product-image" href="{{ object.get_absolute_url }}">
        {% thumbnail object.product_image "224x291" crop=False as im %}
        <img src="{{ im.url }}" alt="{{ object }}" width="{{ im.width }}" height="{{ im.height }}" style="margin:{{ im|positive_margin:'224x291' }}">
        {% endthumbnail %}
    </a>
    <div class="product-hover">
        <div class="header">
            <a class="product-like heart" href="#" data-dialog-url="{% url dialog-like-product %}" data-like-url="{% url product-action object.id 'like' %}" data-unlike-url="{% url product-action object.id 'unlike' %}" data-slug="{{ object.slug }}" data-id="{{ object.id }}" data-vendor="{{ object.default_vendor.vendor }}" data-price="{{ object.default_vendor.locale_price|floatformat:0|apprl_intcomma }}"></a>
            <div class="right">
                <div class="comments">0</div>
                <div class="likes">0</div>
            </div>
        </div>
        <div class="footer">
            <a class="footer-button info" href="{{ object.get_absolute_url }}">More info</a>
            <a class="footer-button buy" target="_blank" href="{% url statistics.views.product_click_count %}?i={{ object.id }}&u={{ object.default_vendor.buy_url|urlencode }}" data-slug="{{ object.slug }}" data-vendor="{{ object.default_vendor.vendor }}" data-price="{{ object.default_vendor.locale_price|floatformat:0|apprl_intcomma }}">Buy</a>
        </div>
    </div>
    <h4><a href="{{ object.get_absolute_url }}">{{ object.manufacturer }}</a></h4>
    {% if not object.default_vendor or object.default_vendor.availability == 0 %}
    <span class="sold-out">SOLD OUT</span>
    {% else %}
    <p>
        {% if object.default_vendor.locale_discount_price %}
        <span class="discount-price" data-currency="{{ object.default_vendor.locale_currency }}">{{ object.default_vendor.locale_discount_price|floatformat:0|apprl_intcomma }} {{ object.default_vendor.locale_currency }}</span>
        <span class="price discounted" data-currency="{{ object.default_vendor.locale_currency }}">{{ object.default_vendor.locale_price|floatformat:0|apprl_intcomma }} {{ object.default_vendor.locale_currency }}</span>
        {% else %}
        <span class="price" data-currency="{{ object.default_vendor.locale_currency }}">{{ object.default_vendor.locale_price|floatformat:0|apprl_intcomma }} {{ object.default_vendor.locale_currency }}</span>
        {% endif %}
    </p>
    {% endif %}
</div>
</li>
