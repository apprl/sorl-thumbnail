{% load i18n follow_tags %}

{% if request.user.is_authenticated and request.user != profile.user and profile.user %}
<span class="{% if request.user.get_profile|is_following_profile:profile %}following{% else %}not_following{% endif %}">
    <a href="{% unfollow_tag profile %}" class="unfollow" data-profile-type="{% if profile.is_brand %}brand{% else %}member{% endif %}" data-profile-id="{{ profile.id }}" data-original-text="{% trans 'Following' %}" data-hover-text="{% trans 'Stop following' %}"><span>{% trans "Following" %}</span></a>
    <a href="{% follow_tag profile %}" class="follow" data-profile-type="{% if profile.is_brand %}brand{% else %}member{% endif %}" data-profile-id="{{ profile.id }}"><span>{% trans "Follow" %}</span></a>
</span>
{% else %}
    {% if request.user != profile.user %}
    <span class="not_following">
      <a href="{% url dialog-follow-user %}?brand={% if profile.is_brand %}1{% else %}0{% endif %}&next={{ request.get_full_path }}" class="follow open-dialog"><span>{% trans "Follow" %}</span></a>
    </span>
    {% endif %}
{% endif %}
