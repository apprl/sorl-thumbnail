{% extends 'base.html' %}
{% load i18n %}

{% block body-classes %}publisher-referral-page{% endblock body-classes %}
{% block body %}

{% include 'dashboard/body_header.html' %}

<h2>{% trans "Earn money by inviting publishers/bloggers" %}</h2>
<p>{% blocktrans %}As one of our top members, you will earn money when a publisher/blogger that you invite to APPRL joins and starts driving sales. For 6 months you will earn 50% of what they earn on APPRL. Also any publisher/blogger that you invite will receive €20 on their APPRL account to start with.{% endblocktrans %}</p>

<div class="row referral-row">
    <div class="col-md-4 col-md-offset-1">
        <div class="referral-link-container">
            <h4>{% trans "Invite by e-mail:" %}</h4>
            {% if messages %}
                {% for message in messages %}
                <p>{{ message }}</p>
                {% endfor %}
            </ul>
            {% endif %}
            <form method="POST" action="{% url 'dashboard-referral-mail' %}">
                {% csrf_token %}
                <textarea class="form-control" rows="3" name="emails" placeholder="{% trans "Add e-mails, separate with comma" %}"></textarea>
                <button type="submit" class="btn btn-primary btn-block">{% trans "SEND" %}</button>
            </form>
            <p>{% trans "Write addresses like this:<br>email1@test.com, email2@test.com, ..." %}</p>
        </div>
    </div>
    <div class="col-md-2"></div>
    <div class="col-md-4">
        <div class="referral-link-container">
            <h4>{% trans "Or invite by sharing your invitation link:" %}</h4>
            <input onFocus="this.select()" onMouseUp="return false" type="text" class="form-control" value="{{ request.user.get_referral_domain_url }}">
            <p>{% trans "You also can copy and share this link in a direct message, in an e-mail, text message or any other way if you want to make it more personal." %}</p>
        </div>
    </div>
</div>

<p><strong>{% trans "This is how it works:" %}</strong></p>
<ol>
    <li>{% trans "Share your invitation link with the person you wish to invite and ask them to click it and apply to APPRL." %}</li>
    <li>{% trans "For every publisher/blogger that signs up to APPRL via your invitation link, they will become a “referral publisher” to you for 6 months." %}</li>
    {% url 'dashboard' as dashboard_url %}
    <li>{% blocktrans with dashboard_url=dashboard_url %}<strong>During these 6 months, you will make half of what the publisher/blogger you have invited make</strong>. For example, if they make €20 on one sale, you make €10. You can track how much you earn under <a href="{{dashboard_url}}">your statistics</a>.{% endblocktrans %}</li>
</ol>

<br>
<p><strong>{% trans "So far these have successfully signed up via your invitation link:" %}</strong></p>
<ul class="list-unstyled">
    {% for referral in referrals %}
    <li><a href="{{ referral.get_absolute_url }}">{{ referral.display_name }}</a> - {% blocktrans with date_joined=referral.date_joined|date:"d F Y" referral_end=referral.referral_partner_parent_date|date:"d F Y" %}Signed up {{date_joined}}, your referral period ends {{referral_end}}{% endblocktrans %}</li>
    {% empty %}
    <li>{% trans "None so far." %}</li>
    {% endfor %}
</ul>

{% endblock %}
