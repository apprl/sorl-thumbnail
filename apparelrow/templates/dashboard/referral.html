{% extends 'base.html' %}
{% load i18n %}

{% block extra-title %}{% trans "Referral" %} | {% endblock %}

{% block body-classes %}publisher-referral-page{% endblock body-classes %}
{% block body %}

    <h1>{% trans "Invite & Earn" %}</h1>

    <h2>{% trans "Invite bloggers to join APPRL and earn more money for you both." %}</h2>
    <p>
        {% trans "This offer is valid for an unlimited number of bloggers." %}
    </p>

    <p>
    <strong>{% trans "How it works" %}</strong>
    <ol>
        <li>1. {% trans "Invite a blogger by using your personal invitation link or the form below." %}</li>
        <li>2. {% trans "Once invited bloggers are approved to join APPRL they will receive a welcome gift of â‚¬50 in their APPRL account." %}</li>
        <li>3. {% trans "You will receive a reward of 15&#37; of what they earn for 6 months, which APPRL will pay you separate from the invited blogger's earnings." %}</li>
    </ol>
    </p>

    <div class="row referral-row">
        <div class="col-md-8 col-md-offset-2">
            <div class="referral-link-container box">
                <h4>{% trans "Invite by e-mail" %}</h4>
                {% if messages %}
                    {% for message in messages %}
                        <p>{{ message }}</p>
                    {% endfor %}
                {% endif %}
                <form method="POST">
                    {% csrf_token %}
                    <textarea rows="3" name="emails" placeholder="{% trans "Add e-mails, separated with comma" %}"></textarea>
                    <button type="submit" class="btn btn-primary center">{% trans "SEND" %}</button>
                </form>
                <p>{% trans "Write addresses like this:<br><i>email1@example.com</i>, <i>email2@example.com</i>, ..." %}</p>
            </div>
        </div>
    </div>
    <div class="row referral-row">
        <div class="col-md-8 col-md-offset-2">
            <div class="referral-link-container">
                <h4>{% trans "Your personal invitation link" %}</h4>
                <input onFocus="this.select()" onMouseUp="return false" type="text" class="center" value="{{ request.user.get_referral_domain_url }}">
                <p>{% trans "Copy and share this link in a direct message, an e-mail, text message or any other way to make your invitation more personalgit." %}</p>
            </div>
        </div>
    </div>

    <p><strong>{% trans "The following have applied to Apprl via your link:" %}</strong></p>
    <ul>
        {% for referral in referrals %}
        <li><a href="{{ referral.get_absolute_url }}">{{ referral.display_name }}</a> -
            {% blocktrans with date_joined=referral.date_joined|date:"d F Y" referral_end=referral.referral_partner_parent_date|date:"d F Y" %}
                Signed up {{ date_joined }}, your referral period ends {{ referral_end }}{% endblocktrans %}</li>
        {% empty %}
        <li>{% trans "None so far." %}</li>
        {% endfor %}
    </ul>

{% endblock %}
