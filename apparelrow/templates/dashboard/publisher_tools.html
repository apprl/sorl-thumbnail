{% extends "base.html" %}
{% load i18n apparel_extras compressed %}
{% load static from staticfiles %}

{% block extra-title %}{% trans "Publisher Tools" %} | {% endblock %}

{% block body-classes %}discover-list-page{% endblock %}
{% block body-container-classes %}body-grey{% endblock %}
{% block extra-styles %}{% compressed_css 'homepage' %}{% endblock extra-styles %}

{% block full-body %}

<div class="container-fluid apprl-content apprl-top">
    <div class="row apprl-publishers-header apprl-header apprl-header-slim" style="visibility:hidden; ">
        <div class="col-xs-12 apprl-header-wrap">
            <div class="container apprl-header-measurement"> <!-- Reference block for jQuery calculations, minimizes code -->
                <div class="row">
                    <div class="col-lg-8">
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row">
                    <div class="apprl-header-left apprl-header-left-publisher publisher-top">
                        <div class="row apprl-header-left-row">
                            <div class="col-xs-12" style="min-height: 350px;">
                                <h1 class="apprl-c-primary apprl-maintitle">{% trans "PUBLISHER TOOLS" %}</h1>
                            </div>
                            <div class="clearfix"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container">
    <div class="header-screens">
        <img class="image-header"  src="{% static 'images/screens.png' %}" />
    </div>
</div>
<div class="container" style="background: #eeeeee;">
    <div class="row">
        <div class="col-lg-12 apprl-tools">
            <h4 class="apprl-slash text-center">{% trans "Our Tools" %}</h4>
            <p class="text-center">{% trans "Apprl offers a range of tools and formats for bloggers and other digital fashion beauty and media. Through our tools and the support from our team we help you grow, earn money on your content and learn more about your audience." %}<br />&nbsp;</p>
        </div>
        <div class="col-lg-12">
            <ul class="discover-list list-unstyled row">
                <li class="col-discover-item clickable-boxes">
                    <div class="user-medium panel publisher-panel">
                        <a data-toggle="modal" data-target="#modal_tool_shop">
                            <div class="image" align=center>
                                <img src="{% static 'images/tools/PublisherToolShop_thumb.png' %}" />
                            </div>
                        </a>
                        <div class="text">
                            <div class="bg"></div>
                            <div class="title">
                                <span>{% trans "Shop" %}</span>
                            </div>
                            <div class="desc">
                                <span>{% trans "Let your audience shop your photos</span>" %}</span>
                            </div>
                            <a class="btn btn-default btn-apprldark btn-lg" data-toggle="modal" data-target="#modal_tool_shop">
                                {% trans "Read more" %}
                            </a>
                        </div>
                    </div>
                </li>
                <li class="col-discover-item clickable-boxes">
                    <div class="user-medium panel publisher-panel">
                        <a data-toggle="modal" data-target="#modal_tool_collage">
                            <div class="image" align=center>
                                <img src="{% static 'images/tools/PublisherToolShop_thumb.png' %}" />
                            </div>
                        </a>
                        <div class="text">
                            <div class="bg"></div>
                            <div class="title">
                                <span>{% trans "Collage" %}</span>
                            </div>
                            <div class="desc">
                                <span>{% trans "Let your audience shop your photos</span>" %}
                            </div>
                            <a class="btn btn-default btn-apprldark btn-lg" data-toggle="modal" data-target="#modal_tool_collage">
                                {% trans "Read more" %}
                            </a>
                        </div>
                    </div>
                </li>
                <li class="col-discover-item clickable-boxes">
                    <div class="user-medium panel publisher-panel">
                        <a data-toggle="modal" data-target="#modal_tool_tagged_photo">
                            <div class="image" align=center>
                                <img src="{% static 'images/tools/PublisherToolShop_thumb.png' %}" />
                            </div>
                        </a>
                        <div class="text">
                            <div class="bg"></div>
                            <div class="title">
                                <span>{% trans "Tagged Photos" %}</span>
                            </div>
                            <div class="desc">
                                <span>{% trans "Let your audience shop your photos" %}</span>
                            </div>
                            <a class="btn btn-default btn-apprldark btn-lg" data-toggle="modal" data-target="#modal_tool_tagged_photo">
                                {% trans "Read more" %}
                            </a>
                        </div>
                    </div>
                </li>
                <li class="col-discover-item clickable-boxes">
                    <div class="user-medium panel publisher-panel">
                        <a data-toggle="modal" data-target="#modal_tool_text_link">
                            <div class="image" align=center>
                                <img src="{% static 'images/tools/PublisherToolShop_thumb.png' %}" />
                            </div>
                        </a>
                        <div class="text">
                            <div class="bg"></div>
                            <div class="title">
                                <span>{% trans "Text Links" %}</span>
                            </div>
                            <div class="desc">
                                <span>{% trans "Let your audience shop your photos</span>" %}
                            </div>
                            <a class="btn btn-default btn-apprldark btn-lg" data-toggle="modal" data-target="#modal_tool_text_link">
                                {% trans "Read more" %}
                            </a>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</div>

{% include 'dashboard/fragments/dialog_tool_shop.html' with request=request csrf_token=csrf_token next=next only %}
{% include 'dashboard/fragments/dialog_tool_collage.html' with request=request csrf_token=csrf_token next=next only %}
{% include 'dashboard/fragments/dialog_tool_tagged_photo.html' with request=request csrf_token=csrf_token next=next only %}
{% include 'dashboard/fragments/dialog_tool_text_link.html' with request=request csrf_token=csrf_token next=next only %}

<script type="text/javascript">
    $('.modal').on('shown.bs.modal', function (e) {
        resizeSliderContainer(this);
    });
    $('#modal_tool_shop').on('shown.bs.modal', function (e) {
        $('#modal_tool_shop .iosSlider').iosSlider('destroy');
        $('#modal_tool_shop .iosSlider').iosSlider({
            scrollbar: false,
            snapToChildren: true,
            desktopClickDrag: true,
            navPrevSelector: $('#modal_tool_shop .tools_prevButton'),
            navNextSelector: $('#modal_tool_shop .tools_nextButton'),
            autoSlide: true,
            infiniteSlider: true,
            onSliderLoaded: function(){
                $('#modal_tool_shop').find(".slider-container").css('visibility','visible');
            }
        });
    });
    $('#modal_tool_collage').on('shown.bs.modal', function (e) {
        $('#modal_tool_collage .iosSlider').iosSlider('destroy');
        $('#modal_tool_collage .iosSlider').iosSlider({
            scrollbar: false,
            snapToChildren: true,
            desktopClickDrag: true,
            navPrevSelector: $('#modal_tool_collage .tools_prevButton'),
            navNextSelector: $('#modal_tool_collage .tools_nextButton'),
            autoSlide: true,
            infiniteSlider: true,
            onSliderLoaded: function(){
                $('#modal_tool_collage').find(".slider-container").css('visibility','visible');
            }
        });
    });
    $('#modal_tool_tagged_photo').on('shown.bs.modal', function (e) {
        $('#modal_tool_tagged_photo .iosSlider').iosSlider('destroy');
        $('#modal_tool_tagged_photo .iosSlider').iosSlider({
            scrollbar: false,
            snapToChildren: true,
            desktopClickDrag: true,
            navPrevSelector: $('#modal_tool_tagged_photo .tools_prevButton'),
            navNextSelector: $('#modal_tool_tagged_photo .tools_nextButton'),
            autoSlide: true,
            infiniteSlider: true,
            onSliderLoaded: function(){
                $('#modal_tool_tagged_photo').find(".slider-container").css('visibility','visible');
            }
        });
    });
    $('#modal_tool_text_link').on('shown.bs.modal', function (e) {
        $('#modal_tool_text_link .iosSlider').iosSlider('destroy');
        $('#modal_tool_text_link .iosSlider').iosSlider({
            scrollbar: false,
            snapToChildren: true,
            desktopClickDrag: true,
            navPrevSelector: $('#modal_tool_text_link .tools_prevButton'),
            navNextSelector: $('#modal_tool_text_link .tools_nextButton'),
            autoSlide: true,
            infiniteSlider: true,
            onSliderLoaded: function(){
                $('#modal_tool_text_link').find(".slider-container").css('visibility','visible');
            }
        });
    });
</script>

<script type="text/javascript">
    $(window).load(function() {
        //Function below
        resizeapprlheader();
        placeScreens();
    });

    //APPRL header logic rebuilt after first delivery of code (built 20141023), (modified 20141024, 20141030)
    //This is used to create the header widths dynamically instead of complex CSS-logic in LESS files with values

    //Set a value based on navbar margin left from auto css
    //Function needs optimization by developer
    function resizeapprlheader() {
        //Set vars
        var windowWidth = $(window).width();
        var headerLeftWidth = $('.apprl-header-measurement .col-lg-8').css('width');
        if(windowWidth <= 767) { //Responsive logic
            var headerLeftWidth = 'auto';
        } else if(windowWidth <= 1300) { //Responsive logic
            var headerLeftWidth = parseInt(headerLeftWidth, 10) - 30;
        }
        //Step One: Calculate and change left side of the header
        var headerMarginValue = $('.apprl-header-measurement .row').position().left;
        if (headerMarginValue === 0) { //if misinterpreted as 0 (FF IE correction)
            var headerMarginValue = $('.navbar .container').css('margin');
            $('.apprl-header .apprl-header-left').css({
                position: $('.navbar .container').css('position'),
                margin: headerMarginValue,
                width: headerLeftWidth
            });
        } else {
            $('.apprl-header .apprl-header-left').css({
                position: $('.navbar .container').css('position'),
                marginLeft: headerMarginValue,
                width: headerLeftWidth
            });
        }

        //Correct the margin and values
        $('.apprl-header .apprl-header-left').css('margin-right', 0);
        $('.apprl-header .apprl-header-left').css('padding-right', 0);

        //Step Two: calculate the heights if the right puffs and set
        var homeHeaderHeight = $('.apprl-home-header .apprl-header-left').css('height');
        var headerSlimHeight = $('.apprl-header-slim .apprl-header-left').css('height');
        //Measure the left section height and use for the right puffs /2
        var homeHeaderHalfHeight = parseInt(homeHeaderHeight, 10) * 0.5;
        var headerSlimHalfHeight = parseInt(headerSlimHeight, 10) * 0.6;
        if(windowWidth <= 767) {
            var homeHeaderHalfHeight = 'auto';
            var headerSlimHalfHeight = 'auto';
            $('.apprl-header .apprl-header-left').css('margin-left', 0);
        } else if(windowWidth <= 880) {
            var headerSlimHalfHeight = parseInt(headerSlimHeight, 10);
        } else if(windowWidth <= 1000) {
            var headerSlimHalfHeight = parseInt(headerSlimHeight, 10) * 0.8;
        }
        //Set heights
        $('.apprl-home-header .apprl-publisher-puff').css('height', homeHeaderHalfHeight);
        $('.apprl-home-header .apprl-retailer-puff').css('height', homeHeaderHalfHeight);
        $('.apprl-header-slim .apprl-publisher-puff').css('height', headerSlimHalfHeight);
        $('.apprl-header-slim .apprl-retailer-puff').css('height', headerSlimHalfHeight);
        $('.apprl-header').css('visibility', '');
    }

    function resizeSliderContainer(modal) {
        var setHeight = $(modal).find('.iosSlider .slider .item:eq(0) img').height();
        $(modal).find('.slider-container').css({
            height: setHeight
        });
    }

    /* Locate screens in the header */
    function placeScreens() {
        //Set vars
        var windowWidth = $(window).width();
        var screensWidth = $('.apprl-header-measurement').css('width');
        var headerMarginValue = $('.apprl-header-measurement .row').css('marginLeft');
        if (headerMarginValue === 0) { //if misinterpreted as 0 (FF IE correction)
            var headerMarginValue = $('.navbar .container').css('marginLeft');
            $('.header-screens').css({
                marginLeft: headerMarginValue,
                width: screensWidth
            });
        } else {
            $('.header-screens').css({
                marginLeft: headerMarginValue,
                width: screensWidth
            });
        }
        $('.image-header').css({
               marginRight: "0px"
            });
    }

     $(window).bind('resize', function(){
        placeScreens();
        resizeSliderContainer($('.in'));
    });

    $(window).bind('orientationchange',function(e) {
        placeScreens();
        resizeSliderContainer($('.in'));
    });
</script>
{% endblock %}
