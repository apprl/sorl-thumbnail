{% extends "base.html" %}
{% load i18n apparel_extras compressed %}
{% load static from staticfiles %}

{% block extra-title %}{% trans "Publisher Tools" %} | {% endblock %}

{% block body-classes %}discover-list-page{% endblock %}
{% block extra-styles %}{% compressed_css 'homepage' %}{% endblock extra-styles %}

{% block full-body %}

<div class="container">
    <div class="body-header">
        <h1>{% trans "Create & Earn" %}</h1>
        <p>{% trans "APPRL offers a range of tools and formats for you to earn money by creating different types of shoppable content. We also have smart tools to save time for you, for example you can install APPRL for Chrome to add products directly from retailers' sites." %}</p>
        <ul class="list-shortcuts">
            <li><a href="{% url 'dashboard' %}" class="btn btn-default">{% trans "Your Dashboard" %}</a></li>
            <li><a href="{% url 'dashboard-commissions' %}" class="btn btn-default">{% trans "Store Commissions" %}</a></li>
        </ul>
    </div>

    <div class="row">
        <div class="col-lg-12">
            <ul class="discover-list list-unstyled row">

                <!-- Invite & Earn -->
                {% if request.user.is_partner and request.user.referral_partner %}
                <li class="col-discover-item">
                    <div class="panel publisher-panel">
                        {# need url function for referral page here #}
                        <a href="{% url 'dashboard-referral' %}"><img src="{% static 'images/tools/referral.jpg' %}" /></a>
                        <article>
                            <h2>{% trans "Invite & Earn" %}</h2>
                            <p>{% trans "Earn money by inviting publishers and bloggers." %}</p>
                            <a class="btn btn-primary" href="{% url 'dashboard-referral' %}">
                                {% trans "Get Started" %}
                            </a>
                            <span class="empty"></span>
                        </article>
                    </div>
                </li>
                {% endif %}
                <!-- Product List Widget -->
                <li class="col-discover-item">
                    <div class="panel publisher-panel">
                        <a href="{% url 'create-product-widget' 'multiple' %}"><img src="{% static 'images/tools/product-list.jpg' %}" /></a>
                        <article>
                            <div class="ribbon"><span>{% trans "New!" %}</span></div>
                            <h2>{% trans "Product List" %}</h2>
                            <p>{% trans "List products next to your posts, images and videos." %}</p>
                            <a class="btn btn-primary" href="{% url 'create-product-widget' 'multiple' %}">
                                {% trans "Create Product List" %}
                            </a>
                            <!--<a class="btn btn-default" data-toggle="modal" data-target="#modal_tool_text_link">
                                {% trans "Info" %}
                            </a>-->
                        </article>
                    </div>
                </li>

                <!-- Single Product Widget -->
                <li class="col-discover-item">
                    <div class="panel publisher-panel">
                        <a href="{% url 'create-product-widget' 'single' %}"><img src="{% static 'images/tools/single-product.jpg' %}" /></a>
                        <article>
                            <div class="ribbon"><span>{% trans "New!" %}</span></div>
                            <h2>{% trans "Single Product" %}</h2>
                            <p>{% trans "Let your fans scroll through a selection of products." %}</p>
                            <a class="btn btn-primary" href="{% url 'create-product-widget' 'single' %}">
                                {% trans "Create Single Product" %}
                            </a>
                            <!--<a class="btn btn-default" data-toggle="modal" data-target="#modal_tool_single_widget">
                                {% trans "Info" %}
                            </a>-->
                        </article>
                    </div>
                </li>
                <!-- Shop -->
                <li class="col-discover-item">
                    <div class="panel publisher-panel">
                        <a href="{% url 'create-shop' %}"><img src="{% static 'images/tools/shop.jpg' %}" /></a>
                        <article>
                            <h2>{% trans "Shop" %}</h2>
                            <p>{% trans "Create a shop for your site in just a few minutes." %}</p>
                            <a class="btn btn-primary" href="{% url 'create-shop' %}">
                                {% trans "Create Shop" %}
                            </a>
                            <a class="btn btn-default" data-toggle="modal" data-target="#modal_tool_shop">
                                {% trans "Info" %}
                            </a>
                        </article>
                    </div>
                </li>

                <!-- Collage -->
                <li class="col-discover-item">
                    <div class="panel publisher-panel">
                        <a href="{% url 'look-editor' 'collage' %}"><img src="{% static 'images/tools/collage.jpg' %}" /></a>
                        <article>
                            <h2>{% trans "Collage" %}</h2>
                            <p>{% trans "Share interactive mood boards with your audience." %}</p>
                            <a class="btn btn-primary" href="{% url 'look-editor' 'collage' %}">
                                {% trans "Create Collage" %}
                            </a>
                            <a class="btn btn-default" data-toggle="modal" data-target="#modal_tool_collage">
                                {% trans "Info" %}
                            </a>
                        </article>
                    </div>
                </li>

                <!-- Tagged Photos -->
                <li class="col-discover-item">
                    <div class="panel publisher-panel">
                        <a href="{% url 'look-editor' 'photo' %}"><img src="{% static 'images/tools/tagged-photo.jpg' %}" /></a>
                        <article>
                            <h2>{% trans "Tagged Photos" %}</h2>
                            <p>{% trans "Let your audience shop your curated photos." %}</p>
                            <a class="btn btn-primary" href="{% url 'look-editor' 'photo' %}">
                                {% trans "Create Tagged Photo" %}
                            </a>
                            <a class="btn btn-default" data-toggle="modal" data-target="#modal_tool_tagged_photo">
                                {% trans "Info" %}
                            </a>
                        </article>
                    </div>
                </li>

                <!-- Product Links -->
                <li class="col-discover-item">
                    <div class="panel publisher-panel">
                        <a href="{% url 'shop' %}"><img src="{% static 'images/tools/product-link.jpg' %}" /></a>
                        <article>
                            <h2>{% trans "Product Links" %}</h2>
                            <p>{% trans "Get short links for products with just a click." %}</p>
                            <a class="btn btn-primary" href="{% url 'shop' %}">
                                {% trans "Get Links" %}
                            </a>
                            <a class="btn btn-default" data-toggle="modal" data-target="#modal_tool_text_link">
                                {% trans "Info" %}
                            </a>
                        </article>
                    </div>
                </li>

                <!-- Chrome Extension -->
                <li class="col-discover-item">
                    <div class="panel publisher-panel">
                        <a target="_blank" href="https://chrome.google.com/webstore/detail/apprl/igpamghchoipgalgboobhfnohlgbpalm"><img src="{% static 'images/tools/chrome-extension.jpg' %}" /></a>
                        <article>
                            <h2>{% trans "APPRL for Chrome" %}</h2>
                            <p>{% trans "Get links and like products directly from retailers' sites." %}</p>
                            <a class="btn btn-primary" href="https://chrome.google.com/webstore/detail/apprl/igpamghchoipgalgboobhfnohlgbpalm">
                                {% trans "Download" %}
                            </a>
                            <a class="btn btn-default" data-toggle="modal" data-target="#modal_tool_chrome_ext">
                                {% trans "Info" %}
                            </a>
                        </article>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</div>

{% include 'dashboard/fragments/dialog_tool_shop.html' with request=request csrf_token=csrf_token next=next only %}
{% include 'dashboard/fragments/dialog_tool_collage.html' with request=request csrf_token=csrf_token next=next only %}
{% include 'dashboard/fragments/dialog_tool_tagged_photo.html' with request=request csrf_token=csrf_token next=next only %}
{% include 'dashboard/fragments/dialog_tool_text_link.html' with request=request csrf_token=csrf_token next=next only %}
{% include 'dashboard/fragments/dialog_tool_chrome_ext.html' with request=request csrf_token=csrf_token next=next only %}

<script type="text/javascript">
    /*$('.modal').on('shown.bs.modal', function (e) {
        resizeSliderContainer(this);
    });*/
    $('.modal').on('shown.bs.modal', function () {
        var modalSlider = $(this).find('.iosSlider')
        modalSlider.iosSlider('destroy');
        var prevButton = $(this).find('.tools_prevButton');
        var nextButton = $(this).find('.tools_nextButton');
        var sliderContainer = $(this).find('.slider-container');
        modalSlider.iosSlider({
            scrollbar: false,
            snapToChildren: true,
            desktopClickDrag: true,
            navPrevSelector: prevButton,
            navNextSelector: nextButton,
            autoSlide: true,
            infiniteSlider: true,
            onSliderLoaded: function(){
                sliderContainer.css('visibility','visible');
            }
        });
    });
</script>

<script type="text/javascript">
    /*$(window).load(function() {
        //Function below
        resizeapprlheader();
        placeScreens();
    });

    //APPRL header logic rebuilt after first delivery of code (built 20141023), (modified 20141024, 20141030)
    //This is used to create the header widths dynamically instead of complex CSS-logic in LESS files with values

    //Set a value based on navbar margin left from auto css
    //Function needs optimization by developer
    function resizeapprlheader() {
        //Set vars
        var windowWidth = $(window).width();
        var headerLeftWidth = $('.apprl-header-measurement .col-lg-8').css('width');
        if(windowWidth <= 767) { //Responsive logic
            var headerLeftWidth = 'auto';
        } else if(windowWidth <= 1300) { //Responsive logic
            var headerLeftWidth = parseInt(headerLeftWidth, 10) - 30;
        }
        //Step One: Calculate and change left side of the header
        var headerMarginValue = $('.apprl-header-measurement .row').position().left;
        if (headerMarginValue === 0) { //if misinterpreted as 0 (FF IE correction)
            var headerMarginValue = $('.navbar .container').css('margin');
            $('.apprl-header .apprl-header-left').css({
                position: $('.navbar .container').css('position'),
                margin: headerMarginValue,
                width: headerLeftWidth
            });
        } else {
            $('.apprl-header .apprl-header-left').css({
                position: $('.navbar .container').css('position'),
                marginLeft: headerMarginValue,
                width: headerLeftWidth
            });
        }

        //Correct the margin and values
        $('.apprl-header .apprl-header-left').css('margin-right', 0);
        $('.apprl-header .apprl-header-left').css('padding-right', 0);

        //Step Two: calculate the heights if the right puffs and set
        var homeHeaderHeight = $('.apprl-home-header .apprl-header-left').css('height');
        var headerSlimHeight = $('.apprl-header-slim .apprl-header-left').css('height');
        //Measure the left section height and use for the right puffs /2
        var homeHeaderHalfHeight = parseInt(homeHeaderHeight, 10) * 0.5;
        var headerSlimHalfHeight = parseInt(headerSlimHeight, 10) * 0.6;
        if(windowWidth <= 767) {
            var homeHeaderHalfHeight = 'auto';
            var headerSlimHalfHeight = 'auto';
            $('.apprl-header .apprl-header-left').css('margin-left', 0);
        } else if(windowWidth <= 880) {
            var headerSlimHalfHeight = parseInt(headerSlimHeight, 10);
        } else if(windowWidth <= 1000) {
            var headerSlimHalfHeight = parseInt(headerSlimHeight, 10) * 0.8;
        }
        //Set heights
        $('.apprl-home-header .apprl-publisher-puff').css('height', homeHeaderHalfHeight);
        $('.apprl-home-header .apprl-retailer-puff').css('height', homeHeaderHalfHeight);
        $('.apprl-header-slim .apprl-publisher-puff').css('height', headerSlimHalfHeight);
        $('.apprl-header-slim .apprl-retailer-puff').css('height', headerSlimHalfHeight);
        $('.apprl-header').css('visibility', '');
    }

    function resizeSliderContainer(modal) {
        var setHeight = $(modal).find('.iosSlider .slider .item:eq(0) img').height();
        $(modal).find('.slider-container').css({
            height: setHeight
        });
    }*/

    /* Locate screens in the header */
    /*function placeScreens() {
        //Set vars
        var windowWidth = $(window).width();
        var screensWidth = $('.apprl-header-measurement').css('width');
        var headerMarginValue = $('.apprl-header-measurement .row').css('marginLeft');
        if (headerMarginValue === 0) { //if misinterpreted as 0 (FF IE correction)
            var headerMarginValue = $('.navbar .container').css('marginLeft');
            $('.header-screens').css({
                marginLeft: headerMarginValue,
                width: screensWidth
            });
        } else {
            $('.header-screens').css({
                marginLeft: headerMarginValue,
                width: screensWidth
            });
        }
        $('.image-header').css({
               marginRight: "0px"
            });
    }

     $(window).bind('resize', function(){
        placeScreens();
        resizeSliderContainer($('.in'));
    });

    $(window).bind('orientationchange',function(e) {
        placeScreens();
        resizeSliderContainer($('.in'));
    });*/
</script>
{% endblock %}
